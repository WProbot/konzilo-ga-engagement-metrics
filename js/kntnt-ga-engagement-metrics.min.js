!function(){"use strict";if("undefined"==typeof window||void 0===window.Kntnt||void 0===window.Kntnt.EngagementMetrics||void 0===window.Kntnt.EngagementMetrics.measurer)throw new Error("Kntnt.EngagementMetrics.AbstractListener not defined.");var t=window.Kntnt.EngagementMetrics.measurer;function n(t,n){return t(n={exports:{}},n.exports),n.exports}var s,e,y=n(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),l=function(t){return"object"==typeof t?null!==t:"function"==typeof t},g=function(t){if(!l(t))throw TypeError(t+" is not an object!");return t},w=function(r,i,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,n){return r.call(i,t,n)};case 3:return function(t,n,e){return r.call(i,t,n,e)}}return function(){return r.apply(i,arguments)}},p={f:{}.propertyIsEnumerable},E=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},r={}.toString,h=function(t){return r.call(t).slice(8,-1)},b=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==h(t)?t.split(""):Object(t)},i=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},f=function(t){return b(i(t))},o=function(t,n){if(!l(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!l(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!l(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!l(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},a={}.hasOwnProperty,c=function(t,n){return a.call(t,n)},u=function(t){try{return!!t()}catch(t){return!0}},v=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d=y.document,m=l(d)&&l(d.createElement),S=function(t){return m?d.createElement(t):{}},O=!v&&!u(function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a}),j=Object.getOwnPropertyDescriptor,T={f:v?j:function(t,n){if(t=f(t),n=o(n,!0),O)try{return j(t,n)}catch(t){}if(c(t,n))return E(!p.f.call(t,n),t[n])}},_=function(t,n){if(g(t),!l(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},L={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=w(Function.call,T.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return _(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:_}.set,R=Object.defineProperty,M={f:v?Object.defineProperty:function(t,n,e){if(g(t),n=o(n,!0),g(e),O)try{return R(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},A=Math.ceil,D=Math.floor,P=function(t){return isNaN(t=+t)?0:(0<t?D:A)(t)},k=Math.min,C=function(t){return 0<t?k(P(t),9007199254740991):0},I=Math.max,x=Math.min,N=n(function(t){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)}),F=(N.version,n(function(t){var n="__core-js_shared__",e=y[n]||(y[n]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:N.version,mode:"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})})),G=0,K=Math.random(),V=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++G+K).toString(36))},B=F("keys"),H=function(t){return B[t]||(B[t]=V(t))},q=(s=!1,function(t,n,e){var r,i,o,a=f(t),c=C(a.length),u=(i=c,(r=P(r=e))<0?I(r+i,0):x(r,i));if(s&&n!=n){for(;u<c;)if((o=a[u++])!=o)return!0}else for(;u<c;u++)if((s||u in a)&&a[u]===n)return s||u||0;return!s&&-1}),z=H("IE_PROTO"),U=function(t,n){var e,r=f(t),i=0,o=[];for(e in r)e!=z&&c(r,e)&&o.push(e);for(;n.length>i;)c(r,e=n[i++])&&(~q(o,e)||o.push(e));return o},W="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),J=W.concat("length","prototype"),Q={f:Object.getOwnPropertyNames||function(t){return U(t,J)}},X=n(function(t){var n=F("wks"),e=y.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:V)("Symbol."+t))}).store=n}),Y=X("match"),Z=v?function(t,n,e){return M.f(t,n,E(1,e))}:function(t,n,e){return t[n]=e,t},$=n(function(t){var o=V("src"),n="toString",e=Function[n],a=(""+e).split(n);N.inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,e,r){var i="function"==typeof e;i&&(c(e,"name")||Z(e,"name",n)),t[n]!==e&&(i&&(c(e,o)||Z(e,o,t[n]?""+t[n]:a.join(String(n)))),t===y?t[n]=e:r?t[n]?t[n]=e:Z(t,n,e):(delete t[n],Z(t,n,e)))})(Function.prototype,n,function(){return"function"==typeof this&&this[o]||e.call(this)})}),tt=X("species"),nt=M.f,et=Q.f,rt=y.RegExp,it=rt,ot=rt.prototype,at=/a/g,ct=/a/g,ut=new rt(at)!==at;if(v&&(!ut||u(function(){return ct[X("match")]=!1,rt(at)!=at||rt(ct)==ct||"/a/i"!=rt(at,"i")}))){rt=function(t,n){var e,r,i,o,a,c,u=this instanceof rt,s=l(e=t)&&(void 0!==(r=e[Y])?!!r:"RegExp"==h(e)),f=void 0===n;return!u&&s&&t.constructor===rt&&f?t:(i=ut?new it(s&&!f?t.source:t,n):it((s=t instanceof rt)?t.source:t,s&&f?function(){var t=g(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}.call(t):n),o=rt,(c=(u?this:ot).constructor)!==o&&"function"==typeof c&&(a=c.prototype)!==o.prototype&&l(a)&&L&&L(i,a),i)};for(var st=function(n){n in rt||nt(rt,n,{configurable:!0,get:function(){return it[n]},set:function(t){it[n]=t}})},ft=et(it),lt=0;ft.length>lt;)st(ft[lt++]);(ot.constructor=rt).prototype=ot,$(y,"RegExp",rt)}e=y["RegExp"],v&&e&&!e[tt]&&M.f(e,tt,{configurable:!0,get:function(){return this}});var gt,pt,ht,yt,vt,dt,mt;pt=2,ht=function(i,o,a){return[function(t,n){var e=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,e,n):a.call(String(e),t,n)},a]},yt=X(gt="replace"),vt=ht(i,yt,""[gt]),dt=vt[0],mt=vt[1],u(function(){var t={};return t[yt]=function(){return 7},7!=""[gt](t)})&&($(String.prototype,gt,dt),Z(RegExp.prototype,yt,2==pt?function(t,n){return mt.call(t,this,n)}:function(t){return mt.call(t,this)}));var wt="prototype",bt=function(t,n,e){var r,i,o,a,c=t&bt.F,u=t&bt.G,s=t&bt.S,f=t&bt.P,l=t&bt.B,g=u?y:s?y[n]||(y[n]={}):(y[n]||{})[wt],p=u?N:N[n]||(N[n]={}),h=p[wt]||(p[wt]={});for(r in u&&(e=n),e)o=((i=!c&&g&&void 0!==g[r])?g:e)[r],a=l&&i?w(o,y):f&&"function"==typeof o?w(Function.call,o):o,g&&$(g,r,o,t&bt.U),p[r]!=o&&Z(p,r,a),f&&h[r]!=o&&(h[r]=o)};y.core=N,bt.F=1,bt.G=2,bt.S=4,bt.P=8,bt.B=16,bt.W=32,bt.U=64,bt.R=128;var St=bt,Et=function(t){return Object(i(t))},Ot=Array.isArray||function(t){return"Array"==h(t)},jt=X("species"),Tt=function(t,n){return Ot(e=t)&&("function"!=typeof(r=e.constructor)||r!==Array&&!Ot(r.prototype)||(r=void 0),l(r)&&null===(r=r[jt])&&(r=void 0)),new(void 0===r?Array:r)(n);var e,r},_t=function(l,t){var g=1==l,p=2==l,h=3==l,y=4==l,v=6==l,d=5==l||v,m=t||Tt;return function(t,n,e){for(var r,i,o=Et(t),a=b(o),c=w(n,e,3),u=C(a.length),s=0,f=g?m(t,u):p?m(t,0):void 0;s<u;s++)if((d||s in a)&&(i=c(r=a[s],s,o),l))if(g)f[s]=i;else if(i)switch(l){case 3:return!0;case 5:return r;case 6:return s;case 2:f.push(r)}else if(y)return!1;return v?-1:h||y?y:f}},Lt=function(t,n){return!!t&&u(function(){n?t.call(null,function(){},1):t.call(null)})},Rt=_t(0),Mt=Lt([].forEach,!0);function At(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,n){return(Pt=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function kt(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function Ct(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function It(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}St(St.P+St.F*!Mt,"Array",{forEach:function(t){return Rt(this,t,arguments[1])}});var xt=X("unscopables"),Nt=Array.prototype;null==Nt[xt]&&Z(Nt,xt,{});var Ft=function(t){Nt[xt][t]=!0},Gt=function(t,n){return{value:n,done:!!t}},Kt={},Vt=Object.keys||function(t){return U(t,W)},Bt=v?Object.defineProperties:function(t,n){g(t);for(var e,r=Vt(n),i=r.length,o=0;o<i;)M.f(t,e=r[o++],n[e]);return t},Ht=y.document,qt=Ht&&Ht.documentElement,zt=H("IE_PROTO"),Ut=function(){},Wt="prototype",Jt=function(){var t,n=S("iframe"),e=W.length;for(n.style.display="none",qt.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Jt=t.F;e--;)delete Jt[Wt][W[e]];return Jt()},Qt=Object.create||function(t,n){var e;return null!==t?(Ut[Wt]=g(t),e=new Ut,Ut[Wt]=null,e[zt]=t):e=Jt(),void 0===n?e:Bt(e,n)},Xt=M.f,Yt=X("toStringTag"),Zt=function(t,n,e){t&&!c(t=e?t:t.prototype,Yt)&&Xt(t,Yt,{configurable:!0,value:n})},$t={};Z($t,X("iterator"),function(){return this});var tn=H("IE_PROTO"),nn=Object.prototype,en=Object.getPrototypeOf||function(t){return t=Et(t),c(t,tn)?t[tn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?nn:null},rn=X("iterator"),on=!([].keys&&"next"in[].keys()),an="values",cn=function(){return this},un=function(t,n,e,r,i,o,a){var c,u,s;u=n,s=r,(c=e).prototype=Qt($t,{next:E(1,s)}),Zt(c,u+" Iterator");var f,l,g,p=function(t){if(!on&&t in d)return d[t];switch(t){case"keys":case an:return function(){return new e(this,t)}}return function(){return new e(this,t)}},h=n+" Iterator",y=i==an,v=!1,d=t.prototype,m=d[rn]||d["@@iterator"]||i&&d[i],w=m||p(i),b=i?y?p("entries"):w:void 0,S="Array"==n&&d.entries||m;if(S&&(g=en(S.call(new t)))!==Object.prototype&&g.next&&(Zt(g,h,!0),"function"!=typeof g[rn]&&Z(g,rn,cn)),y&&m&&m.name!==an&&(v=!0,w=function(){return m.call(this)}),(on||v||!d[rn])&&Z(d,rn,w),Kt[n]=w,Kt[h]=cn,i)if(f={values:y?w:p(an),keys:o?w:p("keys"),entries:b},a)for(l in f)l in d||$(d,l,f[l]);else St(St.P+St.F*(on||v),n,f);return f}(Array,"Array",function(t,n){this._t=f(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,Gt(1)):Gt(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");Kt.Arguments=Kt.Array,Ft("keys"),Ft("values"),Ft("entries");for(var sn=X("iterator"),fn=X("toStringTag"),ln=Kt.Array,gn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},pn=Vt(gn),hn=0;hn<pn.length;hn++){var yn,vn=pn[hn],dn=gn[vn],mn=y[vn],wn=mn&&mn.prototype;if(wn&&(wn[sn]||Z(wn,sn,ln),wn[fn]||Z(wn,fn,vn),Kt[vn]=ln,dn))for(yn in un)wn[yn]||$(wn,yn,un[yn],!0)}var bn,Sn=p.f,En=(bn=!0,function(t){for(var n,e=f(t),r=Vt(e),i=r.length,o=0,a=[];o<i;)Sn.call(e,n=r[o++])&&a.push(bn?[n,e[n]]:e[n]);return a});St(St.S,"Object",{entries:function(t){return En(t)}});var On=_t(1);St(St.P+St.F*!Lt([].map,!0),"Array",{map:function(t){return On(this,t,arguments[1])}});var jn={f:Object.getOwnPropertySymbols},Tn=Object.assign,_n=!Tn||u(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=Tn({},t)[e]||Object.keys(Tn({},n)).join("")!=r})?function(t,n){for(var e=Et(t),r=arguments.length,i=1,o=jn.f,a=p.f;i<r;)for(var c,u=b(arguments[i++]),s=o?Vt(u).concat(o(u)):Vt(u),f=s.length,l=0;l<f;)a.call(u,c=s[l++])&&(e[c]=u[c]);return e}:Tn;if(St(St.S+St.F,"Object",{assign:_n}),"undefined"==typeof window||void 0===window.Kntnt||void 0===window.Kntnt.EngagementMetrics||void 0===window.Kntnt.EngagementMetrics.AbstractListener)throw new Error("Kntnt.EngagementMetrics.AbstractListener not defined.");var Ln=window.Kntnt.EngagementMetrics.AbstractListener,Rn=function(t){function n(){var t;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=kt(this,Dt(n).call(this))).settings={gaReadingTimeEvents:[10,20,30,40,50,60,70,80,90,100],gaScanningDepthEvents:[25,50,75,100],gaCategory:"Articles",gaReadingTimeEventName:"Reading {0}%",gaScanningDepthEventName:"Scanning {0}%",gaReadingTimeDimensionSlot:"",gaScanningDepthDimensionSlot:"",gaReadingTimeMetricSlot:"",gaReadingLengthMetricSlot:"",gaScanningDepthMetricSlot:"",gaReadingRatioMetricSlot:"",gaScanningRatioMetricSlot:"",gaBounceLimit:10},t.sendAPI=t.API(),t.readingTimeEventCounter=0,t.scanningDepthEventCounter=0,t.gaReadingTimeEventNames={},t.gaScanningDepthEventNames={},t}var e,r,i;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Pt(t,n)}(n,Ln),e=n,i=[{key:"format",value:function(t){for(var e=t,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(function(t,n){e=e.replace(new RegExp("\\{".concat(n,"\\}"),"g"),t)}),e}}],(r=[{key:"run",value:function(t){var n=this;this.settings=Object.assign({},this.settings,t),this.gaReadingTimeEventNames=this.settings.gaReadingTimeEvents.map(function(t){return n.constructor.format(n.settings.gaReadingTimeEventName,t)}),this.gaScanningDepthEventNames=this.settings.gaScanningDepthEvents.map(function(t){return n.constructor.format(n.settings.gaScanningDepthEventName,t)}),this.title=window.document.getElementsByTagName("title")[0].innerHTML,this.intervalId=window.setInterval(function(){return n.report()},this.settings.beatInterval)}},{key:"report",value:function(){for(;this.metrics.readingRatio>=this.settings.gaReadingTimeEvents[this.readingTimeEventCounter];)this.send(this.gaReadingTimeEventNames[this.readingTimeEventCounter],this.metrics.readingTime),this.readingTimeEventCounter+=1;for(;this.metrics.scanningRatio>=this.settings.gaScanningDepthEvents[this.scanningDepthEventCounter];)this.send(this.gaScanningDepthEventNames[this.scanningDepthEventCounter],this.metrics.scanningDepth),this.scanningDepthEventCounter+=1;this.metrics.readingRatio<100||this.metrics.scanningRatio<100||window.clearInterval(this.intervalId)}},{key:"gaCustomData",value:function(t){var c=this;return Object.assign.apply(Object,It(Object.entries(t).map(function(t){var n,e,r,i=Ct(t,2),o=i[0],a=i[1];return c.settings[o]?(n={},e=c.settings[o],r=c.metrics[a],e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n):{}})))}},{key:"send",value:function(t,n){var e=Object.assign({},this.gaDimensions,this.gaMetrics);this.sendAPI(t,this.title,n,e,this.metrics.readingRatio<this.settings.gaBounceLimit)}},{key:"API",value:function(){return"function"==typeof window.gtag?this.sendGTag:"function"==typeof window.ga?this.sendGA:void 0!==window.dataLayer&&"function"===window.dataLayer.push?this.sendDataLayer:this.sendConsole}},{key:"sendDataLayer",value:function(t,n,e,r,i){window.dataLayer.push(Object.assign({event:"gaEvent",eventCategory:this.settings.gaCategory,eventAction:n,eventLabel:n,eventValue:e,eventNonInteraction:i},r))}},{key:"sendGTag",value:function(t,n,e,r,i){window.gtag("event",t,Object.assign({event_category:this.settings.gaCategory,event_label:n,value:e,non_interaction:i},r))}},{key:"sendGA",value:function(t,n,e,r,i){window.ga("send","event",this.settings.gaCategory,t,n,e,Object.assign({nonInteraction:i},r))}},{key:"sendConsole",value:function(t,n,e,r,i){var o=Object.assign({category:this.settings.gaCategory,action:t,label:n,value:e,nonInteraction:i},r);window.console.log("Google Analytics tracking code missing.\n".concat(JSON.stringify(o,null,2)))}},{key:"gaDimensions",get:function(){return this.gaCustomData({gaReadingTimeDimensionSlot:"readingTime",gaScanningDepthDimensionSlot:"scanningDepth"})}},{key:"gaMetrics",get:function(){return this.gaCustomData({gaReadingTimeMetricSlot:"readingTime",gaReadingLengthMetricSlot:"readingLength",gaScanningDepthMetricSlot:"scanningDepth",gaReadingRatioMetricSlot:"readingRatio",gaScanningRatioMetricSlot:"scanningRatio"})}}])&&At(e.prototype,r),i&&At(e,i),n}();t.addListener(new Rn)}();
